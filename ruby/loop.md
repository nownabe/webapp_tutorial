# 繰り返し
## 概要
プログラムでは条件分岐と並んで重要な繰り返しについて説明します。
何か処理のかたまりを一定の条件に従って繰り返すことを繰り返しといいます。

## 繰り返しとは
繰り返しとは何かの処理を繰り返し行うことです。
永遠に繰り返してしまうとプログラムが永遠に終わらないので、普通は

* ある回数だけ繰り返す
* ある条件を満たす間だけ繰り返す
* 配列の全要素に対して繰り返す

といった条件をもって繰り返しを行います。

Rubyで繰り返しは、繰り返し専用の構文を使う方法と、メソッドを使う方法があります。

## 例
最も単純な例で、1から100まで画面に出力するプログラムを考えます。
繰り返しを使わないと、こうなります。

```ruby
puts 1
puts 2
puts 3
puts 4
# ...
puts 100
```

これを`times`メソッドを使って書き換えると次のようになります。

```ruby
100.times { |i| puts i + 1 }
```

詳しくはあとで説明します。

別の例として、2.8条件分岐であった消費税計算のプログラムを考えてみます。
このプログラムは不正な値を入力するとメッセージを出力します。
このプログラムを次のように変更してみます。

* コマンドライン引数ではなく標準入力(`gets`)から値段を受取るようにする
* 繰り返しを使って正しい値が入力されるまで入力を求めるようにする

```ruby
loop do
  print "税抜価格を入力してください > "
  price = gets.to_i
  
  if price <= 0
    puts "値段は正の整数で入力してください"
  else
    puts "税抜価格は#{price}円です。"
    puts "税込価格は#{(price * 1.08).to_i}円です。"
    
    break # 繰り返しを抜ける
  end
end
```

これを実行すると次のようになります。

```bash
$ ruby loop_tax.rb
税抜価格を入力してください > aaa
値段は正の整数で入力してください
税抜価格を入力してください > 0
値段は正の整数で入力してください
税抜価格を入力してください > -100
値段は正の整数で入力してください
税抜価格を入力してください > 50000
税抜価格は50000円です。
税込価格は54000円です。
```

## 構文による繰り返し
### while文
while文は繰り返しを行うための専用の構文です。
ある条件を満たしている間だけ繰り返しを行います。

```ruby
while 条件
  処理
end
```

![](while.png)



## メソッドによる繰り返し

### ブロック
### timesメソッド
### eachメソッド
### loopメソッド

## 繰り返し制御
### next
### redo
### break

## 練習問題